<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
	<meta name="format-detection" content="telephone=no" />
	<meta name="format-detection" content="email=no" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-touch-fullscreen" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" /> 
	<title>上报信息</title>
	<link rel="stylesheet" href="css/normalize.css" />
	<link rel="stylesheet" href="css/style.css" />
</head>
<body>
	<div id="page">
		<header id="header" class="header">
		  	<h1 class="headline">上报信息</h1>
		  	<a href="javascript:history.go(-1);" class="btn-go-back"></a>
		</header>
		<div class="BottomNav clearfix">
		  	<a href="index.html" ><i class="home"></i>首页</a>
		  	<a href="management.html"><i class="manage"></i>农事管理</a>
		  	<a href="account.html" class="highlight"><i class="account"></i>我的账号</a>
		</div>
		<main id="main" class="main">
			<div class="main-wrapper">
			  	<div class="form personalinfo">
					<form id="exceptionInfoForm" autocomplete="off">
					  	<div class="FormItem clearfix">
							<div class="label"><label>标题</label></div> 
							<div class="field"><input type="text" name="title" class="input-txt required title" /></div>
					  	</div>
					  	<div class="FormItem clearfix">
							<div class="label"><label>地块</label></div>
							<div class="field"><input type="text" name="fieldnum" class="input-txt required fieldnum" /></div>
					  	</div>
					  	<div class="FormItem clearfix">
							<div class="label"><label>内容</label></div>
							<div class="field">
							  <textarea name="content" rows="4" cols="20" class="required content"></textarea></div>
					  	</div>
					  	<div class="button">
						  	<div class="errorMessage"></div>
							<input class="a01" type="reset" value="取消"/>
							<input class="a02 btn-submit" type="submit" value="保存"/>
						</div>
					</form>
			  	</div>
			</div>
		</main>
		<div id="messageBox"></div>
	</div>
	<script type="text/javascript" src="scripts/jquery-2.1.4.min.js"></script>
	<script type="text/javascript" src="scripts/script.js"></script>
	<script type="text/javascript">
		$(document).ready(function () {
			var $form = $('#exceptionInfoForm'),
				$required = $form.find('.required'),
				$fieldnum = $form.find('.fieldnum'),
				$title = $form.find('.title'),
				$content = $form.find('.content'),
				$submit = $form.find('.btn-submit'),
				$messageBox = $('#messageBox');

			enableSubmit();

			$required.on('input', enableSubmit);
			$form.submit(function () {
				$messageBox.html('提交成功！').fadeIn().delay(1000).fadeOut(300, function () {
					window.location.href = 'account.html';
				});

				return false;
			})

			function enableSubmit() {
				var enable = true;

				for (var i = 0; i < $required.length; i++) {
					var $this = $required.eq(i);
					if ($this.val().length <= 0) {
						enable = false;
					}
				}

				if (enable) {
					$submit.removeClass('disabled').attr('disabled', false);
				} else {
					$submit.addClass('disabled').attr('disabled', true);
				}
			}
		})
	</script>
</body>
</html>